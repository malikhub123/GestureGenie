<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Gesture Genie ✨</title>
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Raleway', sans-serif;
            background: linear-gradient(to right, #141E30, #243B55);
            color: #fff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
        }

        header h1 {
            font-size: 3rem;
            font-weight: 800;
            color: #00d2ff;
        }

        header p {
            font-size: 1.2rem;
            color: #cce7ff;
        }

        .main {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            width: 90%;
            max-width: 1000px;
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            justify-content: center;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.2);
        }

        .video-container {
            flex: 1 1 400px;
        }

        #video {
            width: 100%;
            border-radius: 15px;
            border: 5px solid #00d2ff;
        }

        .controls {
            flex: 1 1 300px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .word-box {
            background: #1e2a3a;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-size: 1.5rem;
            font-weight: 600;
            color: #00ffcc;
            border: 2px solid #00d2ff;
        }

        .button-group {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        button {
            padding: 15px;
            font-size: 1rem;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            background: linear-gradient(135deg, #00d2ff, #3a7bd5);
            color: white;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        button:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(0, 210, 255, 0.4);
        }

        .quit-button {
            background: linear-gradient(135deg, #ff4e50, #f9d423);
            grid-column: span 2;
        }

        .instructions {
            background: #1c2a38;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #00d2ff;
            color: #cce7ff;
            font-size: 0.95rem;
        }

        .instructions h3 {
            margin-bottom: 10px;
            color: #00d2ff;
        }

        ul {
            padding-left: 20px;
        }

        @media (max-width: 768px) {
            .main {
                flex-direction: column;
                align-items: center;
            }
        }
    </style><!DOCTYPE html>

<body>

<header>
    <h1>Gesture Genie ✨</h1>
    <p>Sign to Speech Translator</p>
</header>

<div class="main">
    <div class="video-container">
        <img src="{{ url_for('video') }}" id="video" alt="Live Camera Feed">
    </div>

    <div class="controls">
        <div class="word-box">
            Word: <span id="recognized-word">No word yet</span>
        </div>

        <div class="button-group">
            <button onclick="sendAction('add')">Add</button>
            <button onclick="sendAction('clear')">Clear</button>
            <button onclick="sendAction('space')">Space</button>
            <button onclick="sendAction('speak')">Speak</button>
            <button onclick="quitApp()" class="quit-button">Quit</button>
        </div>

        <div class="instructions">
            <h3>Instructions</h3>
            <ul>
                <li>Show a sign in front of the camera.</li>
                <li>Click <strong>Add</strong> to register a letter.</li>
                <li>Click <strong>Space</strong> to insert space.</li>
                <li>Click <strong>Clear</strong> to reset input.</li>
                <li>Click <strong>Speak</strong> to hear the word aloud.</li>
                <li>Click <strong>Quit</strong> or press <kbd>Q</kbd> to exit.</li>
            </ul>
        </div>
    </div>
</div>

<script>
    function sendAction(action) {
        fetch('/action', {
            method: 'POST',
            headers: {'Content-Type': 'application/x-www-form-urlencoded'},
            body: 'action=' + action
        });
    }

    function quitApp() {
        fetch('/shutdown', {method: 'POST'})
            .then(response => {
                window.close();
            });
    }

    function fetchWord() {
        fetch('/word')
            .then(response => response.json())
            .then(data => {
                document.getElementById('recognized-word').textContent = data.word;
            });
    }

    setInterval(fetchWord, 1000);

    document.addEventListener('keydown', function(event) {
        if (event.key === 'a' || event.key === 'A') {
            sendAction('add');
        } else if (event.key === 'c' || event.key === 'C') {
            sendAction('clear');
        } else if (event.code === 'Space') {
            sendAction('space');
            event.preventDefault();
        } else if (event.key === 's' || event.key === 'S') {
            sendAction('speak');
        } else if (event.key === 'q' || event.key === 'Q') {
            quitApp();
        }
    });
</script>

</body>
</html>
